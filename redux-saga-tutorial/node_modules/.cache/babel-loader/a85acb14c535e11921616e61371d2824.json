{"ast":null,"code":"//align saga structure similar to redux actions: if you have a users file in your actions, you should have one in your sagas. it will take care of all the sagas relating to users actions.\n//creating first saga to get users list:\nimport { takeEvery, takeLatest, take, call, fork, put } from 'redux-saga/effects';\nimport * as actions from '../actions/users';\nimport * as api from '../api/users'; //function* is a generator function\n\nfunction* getUsers() {\n  try {\n    // once this call resolves, it will assign to result\n    const result = yield call(api.getUsers); // nothing below will happen until call finishes\n    // to send a redux success action, need to use sagas 'put'\n\n    yield put(actions.getUsersSuccess({\n      items: result.data.data\n    }));\n  } catch (e) {}\n}\n\nfunction* watchGetUsersRequest() {\n  yield takeEvery(actions.Types.GET_USERS_REQUEST, getUsers);\n}\n\nfunction* createUser(action) {\n  try {\n    //second argument is what you're passing in\n    yield call(api.createUser, {\n      firstName: action.payload.firstName,\n      lastName: action.payload.lastName\n    });\n    yield call(getUsers);\n  } catch (e) {}\n}\n\nfunction* watchCreateUserRequest() {\n  yield takeLatest(actions.Types.CREATE_USER_REQUEST, createUser);\n}\n\nfunction* deleteUser() {\n  yield;\n}\n\nfunction* watchDeleteUserRequest() {\n  while (true) {\n    // take simply returns the action that was dispatched\n    const action = yield take(actions.Types.DELETE_USER_REQUEST); // call deleteUser function\n\n    yield call(deleteUser, {\n      userId: action.payload.userId\n    });\n  }\n}\n\nconst usersSagas = [fork(watchGetUsersRequest), fork(watchCreateUserRequest), fork(watchDeleteUserRequest)];\nexport default usersSagas;","map":{"version":3,"sources":["/Users/mark/Desktop/code/redux-saga/redux-saga-tut/src/sagas/users.js"],"names":["takeEvery","takeLatest","take","call","fork","put","actions","api","getUsers","result","getUsersSuccess","items","data","e","watchGetUsersRequest","Types","GET_USERS_REQUEST","createUser","action","firstName","payload","lastName","watchCreateUserRequest","CREATE_USER_REQUEST","deleteUser","watchDeleteUserRequest","DELETE_USER_REQUEST","userId","usersSagas"],"mappings":"AAAA;AAEA;AACA,SAAQA,SAAR,EAAmBC,UAAnB,EAA+BC,IAA/B,EAAqCC,IAArC,EAA2CC,IAA3C,EAAiDC,GAAjD,QAA2D,oBAA3D;AACA,OAAO,KAAKC,OAAZ,MAAyB,kBAAzB;AACA,OAAO,KAAKC,GAAZ,MAAqB,cAArB,C,CAEA;;AACA,UAAUC,QAAV,GAAqB;AACnB,MAAG;AACD;AACA,UAAMC,MAAM,GAAG,MAAMN,IAAI,CAACI,GAAG,CAACC,QAAL,CAAzB,CAFC,CAGD;AACA;;AACA,UAAMH,GAAG,CAACC,OAAO,CAACI,eAAR,CAAwB;AAChCC,MAAAA,KAAK,EAAEF,MAAM,CAACG,IAAP,CAAYA;AADa,KAAxB,CAAD,CAAT;AAGD,GARD,CAQC,OAAMC,CAAN,EAAQ,CAER;AACF;;AAED,UAAUC,oBAAV,GAAiC;AAC/B,QAAMd,SAAS,CAACM,OAAO,CAACS,KAAR,CAAcC,iBAAf,EAAkCR,QAAlC,CAAf;AACD;;AAED,UAAUS,UAAV,CAAqBC,MAArB,EAA6B;AAC3B,MAAG;AACD;AACA,UAAMf,IAAI,CAACI,GAAG,CAACU,UAAL,EAAiB;AAACE,MAAAA,SAAS,EAAED,MAAM,CAACE,OAAP,CAAeD,SAA3B;AAAsCE,MAAAA,QAAQ,EAAEH,MAAM,CAACE,OAAP,CAAeC;AAA/D,KAAjB,CAAV;AACA,UAAMlB,IAAI,CAACK,QAAD,CAAV;AACD,GAJD,CAIC,OAAMK,CAAN,EAAQ,CAER;AACF;;AAED,UAAUS,sBAAV,GAAmC;AACjC,QAAMrB,UAAU,CAACK,OAAO,CAACS,KAAR,CAAcQ,mBAAf,EAAoCN,UAApC,CAAhB;AACD;;AAED,UAAUO,UAAV,GAAuB;AACrB;AACD;;AAED,UAAUC,sBAAV,GAAmC;AACjC,SAAM,IAAN,EAAY;AACV;AACA,UAAMP,MAAM,GAAG,MAAMhB,IAAI,CAACI,OAAO,CAACS,KAAR,CAAcW,mBAAf,CAAzB,CAFU,CAGV;;AACA,UAAMvB,IAAI,CAACqB,UAAD,EAAa;AACrBG,MAAAA,MAAM,EAAET,MAAM,CAACE,OAAP,CAAeO;AADF,KAAb,CAAV;AAGD;AACF;;AAED,MAAMC,UAAU,GAAG,CACjBxB,IAAI,CAACU,oBAAD,CADa,EAEjBV,IAAI,CAACkB,sBAAD,CAFa,EAGjBlB,IAAI,CAACqB,sBAAD,CAHa,CAAnB;AAMA,eAAeG,UAAf","sourcesContent":["//align saga structure similar to redux actions: if you have a users file in your actions, you should have one in your sagas. it will take care of all the sagas relating to users actions.\n\n//creating first saga to get users list:\nimport {takeEvery, takeLatest, take, call, fork, put} from 'redux-saga/effects';\nimport * as actions from '../actions/users';\nimport * as api from '../api/users';\n\n//function* is a generator function\nfunction* getUsers() {\n  try{\n    // once this call resolves, it will assign to result\n    const result = yield call(api.getUsers);\n    // nothing below will happen until call finishes\n    // to send a redux success action, need to use sagas 'put'\n    yield put(actions.getUsersSuccess({\n      items: result.data.data\n    }));\n  }catch(e){\n\n  }\n}\n\nfunction* watchGetUsersRequest() {\n  yield takeEvery(actions.Types.GET_USERS_REQUEST, getUsers);\n}\n\nfunction* createUser(action) {\n  try{\n    //second argument is what you're passing in\n    yield call(api.createUser, {firstName: action.payload.firstName, lastName: action.payload.lastName });\n    yield call(getUsers);\n  }catch(e){\n\n  }\n}\n\nfunction* watchCreateUserRequest() {\n  yield takeLatest(actions.Types.CREATE_USER_REQUEST, createUser);\n}\n\nfunction* deleteUser() {\n  yield;\n}\n\nfunction* watchDeleteUserRequest() {\n  while(true) {\n    // take simply returns the action that was dispatched\n    const action = yield take(actions.Types.DELETE_USER_REQUEST);\n    // call deleteUser function\n    yield call(deleteUser, {\n      userId: action.payload.userId\n    });\n  }\n}\n\nconst usersSagas = [\n  fork(watchGetUsersRequest),\n  fork(watchCreateUserRequest),\n  fork(watchDeleteUserRequest)\n];\n\nexport default usersSagas;"]},"metadata":{},"sourceType":"module"}